"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/userCookies";
exports.ids = ["pages/api/userCookies"];
exports.modules = {

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FuserCookies&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FuserCookies.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FuserCookies&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FuserCookies.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_userCookies_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/userCookies.js */ \"(api)/./src/pages/api/userCookies.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_userCookies_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_userCookies_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_userCookies_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_userCookies_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/userCookies\",\n        pathname: \"/api/userCookies\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_userCookies_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXJDb29raWVzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZ1c2VyQ29va2llcy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMyRDtBQUMzRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDBEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhaWx3aW5kdWktcHJvdG9jb2wvPzcwY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdXNlckNvb2tpZXMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyQ29va2llc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXJDb29raWVzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FuserCookies&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FuserCookies.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/userCookies.js":
/*!**************************************!*\
  !*** ./src/pages/api/userCookies.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst SANDBOX_API_KEY = \"Sandbox API Key\";\nasync function handler(req, res) {\n    const { cookie } = req.headers;\n    const cookies = cookie ? (0,cookie__WEBPACK_IMPORTED_MODULE_1__.parse)(cookie) : {};\n    const rebillOrganizationToken = cookies.rebillOrganizationToken;\n    const rebillUserEmail = cookies.rebillUserEmail;\n    const rebillName = cookies.rebillName;\n    const rebillLastName = cookies.rebillLastName;\n    const rebillOrganizationName = cookies.rebillOrganizationName;\n    const rebillOrganizationLogo = cookies.rebillOrganizationLogo;\n    const rebillAccountType = cookies.rebillAccountType;\n    const rebillLanguage = cookies.rebillLanguage;\n    const response = {\n        rebillUserEmail,\n        rebillName,\n        rebillLastName,\n        rebillOrganizationLogo,\n        rebillOrganizationName,\n        rebillLanguage\n    };\n    if (!rebillOrganizationToken) {\n        res.status(200).json(response);\n    }\n    if (rebillAccountType === \"sandbox\") {\n        console.log(\"Organization in sandbox\");\n        const { sandboxKey } = await findOrCreateSandboxApiKey(rebillOrganizationToken);\n        response.secretKey = sandboxKey.secretKey;\n        response.publicKey = sandboxKey.publicKey;\n        console.log(\"Sandbox key found\");\n        res.status(200).json({\n            response\n        });\n    }\n    if (rebillAccountType === \"prod\") {\n        const organizations = await getOrganizations(rebillOrganizationToken);\n        console.log(\"organizations\", organizations);\n        const organizationsChildren = organizations[0]?.children;\n        const organizationSandbox = organizationsChildren.find((org)=>org.alias.includes(\"sandbox\"));\n        if (!organizationSandbox) {\n            res.status(400).json({\n                message: \"No sandbox organization found\"\n            });\n        }\n        console.log(\"Organization sandbox found\");\n        const sandboxAuthToken = await switchOrganization(rebillOrganizationToken, organizationSandbox?.id);\n        console.log(\"Organization sandbox switched\");\n        const sandboxKey = await findOrCreateSandboxApiKey(sandboxAuthToken.authToken);\n        response.secretKey = sandboxKey.secretKey;\n        response.publicKey = sandboxKey.publicKey;\n        console.log(\"Sandbox key found\");\n        res.status(200).json({\n            response\n        });\n    }\n}\nasync function findOrCreateSandboxApiKey(token) {\n    const organizationKeys = await getApiKeys(token);\n    console.log(\"Organization keys found\", organizationKeys?.length);\n    const sandboxKey = organizationKeys?.find((key)=>key.description === SANDBOX_API_KEY);\n    if (!sandboxKey) {\n        const newSandboxKey = await createApiKey(SANDBOX_API_KEY, token);\n        return newSandboxKey;\n    }\n    return sandboxKey;\n}\nasync function createApiKey(description, token) {\n    try {\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            method: \"post\",\n            url: `${process.env.API_CORE_URL}/api-keys`,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n                Authorization: `Bearer ${token}`\n            },\n            data: {\n                description\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"createApiKey\", error);\n    }\n}\nasync function getApiKeys(token) {\n    try {\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            method: \"get\",\n            url: `${process.env.API_CORE_URL}/api-keys`,\n            headers: {\n                Accept: \"application/json\",\n                Authorization: `Bearer ${token}`\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"getApiKeys\", error);\n    }\n}\nasync function getOrganizations(token) {\n    try {\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            method: \"get\",\n            url: `${process.env.API_CORE_URL}/auth/organizations`,\n            headers: {\n                Accept: \"application/json\",\n                Authorization: `Bearer ${token}`\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"getOrganizations\", error);\n    }\n}\nasync function switchOrganization(token, organizationId) {\n    try {\n        const response = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            method: \"post\",\n            url: `${process.env.API_CORE_URL}/auth/organizations/${organizationId}`,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n                Authorization: `Bearer ${token}`\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"switchToOrganization\", error);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixjQUFjO0lBQ3JELElBQUk7UUFDRixNQUFNeEMsV0FBVyxNQUFNakIsaURBQUtBLENBQUM7WUFDM0JnRCxRQUFRO1lBQ1JDLEtBQUssQ0FBQyxFQUFFQyxRQUFRQyxHQUFHLENBQUNDLFlBQVksQ0FBQyxvQkFBb0IsRUFBRUssZUFBZSxDQUFDO1lBQ3ZFbEQsU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCOEMsUUFBUTtnQkFDUkMsZUFBZSxDQUFDLE9BQU8sRUFBRWQsTUFBTSxDQUFDO1lBQ2xDO1FBQ0Y7UUFDQSxPQUFPdkIsU0FBU3NDLElBQUk7SUFDdEIsRUFBRSxPQUFPQyxPQUFPO1FBQ2RwQyxRQUFRb0MsS0FBSyxDQUFDLHdCQUF3QkE7SUFDeEM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhaWx3aW5kdWktcHJvdG9jb2wvLi9zcmMvcGFnZXMvYXBpL3VzZXJDb29raWVzLmpzPzE2MTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IHsgcGFyc2UgfSBmcm9tICdjb29raWUnXG5cbmNvbnN0IFNBTkRCT1hfQVBJX0tFWSA9ICdTYW5kYm94IEFQSSBLZXknXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgY29uc3QgeyBjb29raWUgfSA9IHJlcS5oZWFkZXJzXG5cbiAgY29uc3QgY29va2llcyA9IGNvb2tpZSA/IHBhcnNlKGNvb2tpZSkgOiB7fVxuXG4gIGNvbnN0IHJlYmlsbE9yZ2FuaXphdGlvblRva2VuID0gY29va2llcy5yZWJpbGxPcmdhbml6YXRpb25Ub2tlblxuICBjb25zdCByZWJpbGxVc2VyRW1haWwgPSBjb29raWVzLnJlYmlsbFVzZXJFbWFpbFxuICBjb25zdCByZWJpbGxOYW1lID0gY29va2llcy5yZWJpbGxOYW1lXG4gIGNvbnN0IHJlYmlsbExhc3ROYW1lID0gY29va2llcy5yZWJpbGxMYXN0TmFtZVxuICBjb25zdCByZWJpbGxPcmdhbml6YXRpb25OYW1lID0gY29va2llcy5yZWJpbGxPcmdhbml6YXRpb25OYW1lXG4gIGNvbnN0IHJlYmlsbE9yZ2FuaXphdGlvbkxvZ28gPSBjb29raWVzLnJlYmlsbE9yZ2FuaXphdGlvbkxvZ29cbiAgY29uc3QgcmViaWxsQWNjb3VudFR5cGUgPSBjb29raWVzLnJlYmlsbEFjY291bnRUeXBlXG4gIGNvbnN0IHJlYmlsbExhbmd1YWdlID0gY29va2llcy5yZWJpbGxMYW5ndWFnZVxuICBjb25zdCByZXNwb25zZSA9IHtcbiAgICByZWJpbGxVc2VyRW1haWwsXG4gICAgcmViaWxsTmFtZSxcbiAgICByZWJpbGxMYXN0TmFtZSxcbiAgICByZWJpbGxPcmdhbml6YXRpb25Mb2dvLFxuICAgIHJlYmlsbE9yZ2FuaXphdGlvbk5hbWUsXG4gICAgcmViaWxsTGFuZ3VhZ2UsXG4gIH1cbiAgaWYgKCFyZWJpbGxPcmdhbml6YXRpb25Ub2tlbikge1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3BvbnNlKVxuICB9XG4gIGlmIChyZWJpbGxBY2NvdW50VHlwZSA9PT0gJ3NhbmRib3gnKSB7XG4gICAgY29uc29sZS5sb2coJ09yZ2FuaXphdGlvbiBpbiBzYW5kYm94JylcbiAgICBjb25zdCB7c2FuZGJveEtleX0gPSBhd2FpdCBmaW5kT3JDcmVhdGVTYW5kYm94QXBpS2V5KHJlYmlsbE9yZ2FuaXphdGlvblRva2VuKVxuICAgIHJlc3BvbnNlLnNlY3JldEtleSA9IHNhbmRib3hLZXkuc2VjcmV0S2V5XG4gICAgcmVzcG9uc2UucHVibGljS2V5ID0gc2FuZGJveEtleS5wdWJsaWNLZXlcbiAgICBjb25zb2xlLmxvZygnU2FuZGJveCBrZXkgZm91bmQnKVxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHJlc3BvbnNlLFxuICAgIH0pXG4gIH1cblxuICBpZiAocmViaWxsQWNjb3VudFR5cGUgPT09ICdwcm9kJykge1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMgPSBhd2FpdCBnZXRPcmdhbml6YXRpb25zKHJlYmlsbE9yZ2FuaXphdGlvblRva2VuKVxuICAgIGNvbnNvbGUubG9nKCdvcmdhbml6YXRpb25zJywgb3JnYW5pemF0aW9ucylcbiAgICBjb25zdCBvcmdhbml6YXRpb25zQ2hpbGRyZW4gPSBvcmdhbml6YXRpb25zWzBdPy5jaGlsZHJlblxuICAgIGNvbnN0IG9yZ2FuaXphdGlvblNhbmRib3ggPSBvcmdhbml6YXRpb25zQ2hpbGRyZW4uZmluZCgob3JnKSA9PlxuICAgICAgb3JnLmFsaWFzLmluY2x1ZGVzKCdzYW5kYm94JyksXG4gICAgKVxuICAgIGlmICghb3JnYW5pemF0aW9uU2FuZGJveCkge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnTm8gc2FuZGJveCBvcmdhbml6YXRpb24gZm91bmQnLFxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ09yZ2FuaXphdGlvbiBzYW5kYm94IGZvdW5kJylcbiAgICBjb25zdCBzYW5kYm94QXV0aFRva2VuID0gYXdhaXQgc3dpdGNoT3JnYW5pemF0aW9uKFxuICAgICAgcmViaWxsT3JnYW5pemF0aW9uVG9rZW4sXG4gICAgICBvcmdhbml6YXRpb25TYW5kYm94Py5pZCxcbiAgICApXG4gICAgY29uc29sZS5sb2coJ09yZ2FuaXphdGlvbiBzYW5kYm94IHN3aXRjaGVkJylcbiAgICBjb25zdCBzYW5kYm94S2V5ID0gYXdhaXQgZmluZE9yQ3JlYXRlU2FuZGJveEFwaUtleShcbiAgICAgIHNhbmRib3hBdXRoVG9rZW4uYXV0aFRva2VuLFxuICAgIClcbiAgICByZXNwb25zZS5zZWNyZXRLZXkgPSBzYW5kYm94S2V5LnNlY3JldEtleVxuICAgIHJlc3BvbnNlLnB1YmxpY0tleSA9IHNhbmRib3hLZXkucHVibGljS2V5XG4gICAgY29uc29sZS5sb2coJ1NhbmRib3gga2V5IGZvdW5kJylcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICByZXNwb25zZSxcbiAgICB9KVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZpbmRPckNyZWF0ZVNhbmRib3hBcGlLZXkodG9rZW4pIHtcbiAgY29uc3Qgb3JnYW5pemF0aW9uS2V5cyA9IGF3YWl0IGdldEFwaUtleXModG9rZW4pXG4gIGNvbnNvbGUubG9nKCdPcmdhbml6YXRpb24ga2V5cyBmb3VuZCcsIG9yZ2FuaXphdGlvbktleXM/Lmxlbmd0aClcbiAgY29uc3Qgc2FuZGJveEtleSA9IG9yZ2FuaXphdGlvbktleXM/LmZpbmQoXG4gICAgKGtleSkgPT4ga2V5LmRlc2NyaXB0aW9uID09PSBTQU5EQk9YX0FQSV9LRVksXG4gIClcbiAgaWYgKCFzYW5kYm94S2V5KSB7XG4gICAgY29uc3QgbmV3U2FuZGJveEtleSA9IGF3YWl0IGNyZWF0ZUFwaUtleShTQU5EQk9YX0FQSV9LRVksIHRva2VuKVxuICAgIHJldHVybiBuZXdTYW5kYm94S2V5XG4gIH1cbiAgcmV0dXJuIHNhbmRib3hLZXlcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXBpS2V5KGRlc2NyaXB0aW9uLCB0b2tlbikge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3Moe1xuICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LkFQSV9DT1JFX1VSTH0vYXBpLWtleXNgLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignY3JlYXRlQXBpS2V5JywgZXJyb3IpXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0QXBpS2V5cyh0b2tlbikge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuQVBJX0NPUkVfVVJMfS9hcGkta2V5c2AsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignZ2V0QXBpS2V5cycsIGVycm9yKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ2FuaXphdGlvbnModG9rZW4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LkFQSV9DT1JFX1VSTH0vYXV0aC9vcmdhbml6YXRpb25zYCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdnZXRPcmdhbml6YXRpb25zJywgZXJyb3IpXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc3dpdGNoT3JnYW5pemF0aW9uKHRva2VuLCBvcmdhbml6YXRpb25JZCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3Moe1xuICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LkFQSV9DT1JFX1VSTH0vYXV0aC9vcmdhbml6YXRpb25zLyR7b3JnYW5pemF0aW9uSWR9YCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgfSxcbiAgICB9KVxuICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignc3dpdGNoVG9Pcmdhbml6YXRpb24nLCBlcnJvcilcbiAgfVxufVxuIl0sIm5hbWVzIjpbImF4aW9zIiwicGFyc2UiLCJTQU5EQk9YX0FQSV9LRVkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29va2llIiwiaGVhZGVycyIsImNvb2tpZXMiLCJyZWJpbGxPcmdhbml6YXRpb25Ub2tlbiIsInJlYmlsbFVzZXJFbWFpbCIsInJlYmlsbE5hbWUiLCJyZWJpbGxMYXN0TmFtZSIsInJlYmlsbE9yZ2FuaXphdGlvbk5hbWUiLCJyZWJpbGxPcmdhbml6YXRpb25Mb2dvIiwicmViaWxsQWNjb3VudFR5cGUiLCJyZWJpbGxMYW5ndWFnZSIsInJlc3BvbnNlIiwic3RhdHVzIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJzYW5kYm94S2V5IiwiZmluZE9yQ3JlYXRlU2FuZGJveEFwaUtleSIsInNlY3JldEtleSIsInB1YmxpY0tleSIsIm9yZ2FuaXphdGlvbnMiLCJnZXRPcmdhbml6YXRpb25zIiwib3JnYW5pemF0aW9uc0NoaWxkcmVuIiwiY2hpbGRyZW4iLCJvcmdhbml6YXRpb25TYW5kYm94IiwiZmluZCIsIm9yZyIsImFsaWFzIiwiaW5jbHVkZXMiLCJtZXNzYWdlIiwic2FuZGJveEF1dGhUb2tlbiIsInN3aXRjaE9yZ2FuaXphdGlvbiIsImlkIiwiYXV0aFRva2VuIiwidG9rZW4iLCJvcmdhbml6YXRpb25LZXlzIiwiZ2V0QXBpS2V5cyIsImxlbmd0aCIsImtleSIsImRlc2NyaXB0aW9uIiwibmV3U2FuZGJveEtleSIsImNyZWF0ZUFwaUtleSIsIm1ldGhvZCIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJBUElfQ09SRV9VUkwiLCJBY2NlcHQiLCJBdXRob3JpemF0aW9uIiwiZGF0YSIsImVycm9yIiwib3JnYW5pemF0aW9uSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/userCookies.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FuserCookies&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FuserCookies.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();